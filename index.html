<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Editor</title>
  <style>
    :root{--bg:#071026;--panel:#0d1420;--accent1:#6ee7b7;--accent2:#7dd3fc}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,Arial;background:linear-gradient(180deg,var(--bg),#04101a);color:#e7f6f2}
    .container{min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:18px;gap:14px}
    .header{width:100%;max-width:1200px;display:flex;justify-content:flex-end;align-items:center}
    .toolbar{display:flex;gap:10px}
    .btn{padding:10px 14px;border-radius:10px;border:none;background:linear-gradient(90deg,#0b1220,#0f1724);color:var(--accent2);cursor:pointer;font-weight:700;box-shadow:0 8px 20px rgba(2,6,23,0.6)}
    .btn.primary{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#04221a}
    .dropdown{position:relative}
    .dropdown-content{display:none;position:absolute;top:100%;left:0;flex-direction:column;background:#0b1220;border-radius:8px;overflow:hidden;z-index:100}
    .dropdown-content button{border-radius:0;box-shadow:none;text-align:left;width:200px}
    .dropdown:hover .dropdown-content{display:flex}
    .canvasWrap{width:100%;max-width:1024px;display:flex;flex-direction:column;gap:10px}
    .canvas{width:100%;aspect-ratio:1/1;border-radius:12px;position:relative;overflow:hidden;border:1px solid rgba(255,255,255,0.03);box-shadow:0 10px 30px rgba(2,6,23,0.6);background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent)}
    .grid-bg{position:absolute;inset:0;background-image:linear-gradient(rgba(255,255,255,0.03) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,0.03) 1px,transparent 1px);background-size:24px 24px,24px 24px;pointer-events:none}
    .panel{background:var(--panel);padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.02);color:#93a4b3;width:100%}
    .textarea{width:100%;height:100px;padding:8px;border-radius:8px;border:none;background:#07182a;color:#dff8ef;resize:none}
    .sendRow{display:flex;gap:8px;margin-top:8px;justify-content:flex-end}
    .element{position:absolute;border-radius:10px;display:flex;align-items:center;justify-content:center;font-weight:800;color:#07121a;user-select:none;box-shadow:0 8px 20px rgba(2,6,23,0.6)}
    .grid{background:linear-gradient(180deg,rgba(37,99,235,0.9),rgba(96,165,250,0.85));color:#fff}
    .play_button{background:linear-gradient(90deg,#ef4444,#fb7185);color:#fff}
    .increase_button{background:linear-gradient(90deg,#10b981,#34d399);color:#04221a}
    .decrease_button{background:linear-gradient(90deg,#f59e0b,#fbbf24);color:#04221a}
    .auto_play_button{background:linear-gradient(90deg,#06b6d4,#22d3ee);color:#04221a}
    .max_bet_button{background:linear-gradient(90deg,#6366f1,#818cf8);color:#fff}
    .min_bet_button{background:linear-gradient(90deg,#84cc16,#a3e635);color:#04221a}
    .get_free_spins_button{background:linear-gradient(90deg,#ec4899,#f472b6);color:#fff}
    .win_label{background:linear-gradient(90deg,#8b5cf6,#c084fc);color:#07121a;padding:6px 10px;border-radius:8px}
    .label{background:linear-gradient(90deg,#60a5fa,#7dd3fc);color:#031724;padding:6px 8px;border-radius:8px}
    .handle{position:absolute;right:-10px;bottom:-10px;width:18px;height:18px;border-radius:6px;background:#fff;border:2px solid rgba(0,0,0,0.12);cursor:se-resize;z-index:20}
    .badge{position:absolute;transform:translate(10px,-44px);background:rgba(2,12,20,0.9);color:#bfeee1;padding:6px 8px;border-radius:8px;font-size:12px;z-index:30;pointer-events:none}
    .context{position:absolute;display:none;flex-direction:column;gap:8px;padding:10px;border-radius:8px;background:#071429;border:1px solid rgba(255,255,255,0.04);z-index:60;min-width:220px}
    .context input{padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.04);background:#071827;color:#e6fbf6;width:100%}
    .context .row{display:flex;gap:8px;align-items:center}
    .context label{font-size:12px;color:#93a4b3;width:60px}
    .context .actions{display:flex;gap:8px;justify-content:flex-end}
    .context button{padding:8px 10px;border-radius:6px;border:none;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#04221a;font-weight:800;cursor:pointer}
    .footer{width:100%;max-width:1200px;text-align:center;color:#93a4b3;font-size:13px}
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="toolbar">
        <button class="btn" id="addGrid">Insert Grid</button>
        <div class="dropdown">
          <button class="btn">Insert Play</button>
          <div class="dropdown-content">
            <button data-type="play_button">Play Button</button>
            <button data-type="increase_button">Increase Bet Button</button>
            <button data-type="decrease_button">Decrease Bet Button</button>
            <button data-type="auto_play_button">Auto Play Button</button>
            <button data-type="max_bet_button">Max Bet Button</button>
            <button data-type="min_bet_button">Min Bet Button</button>
            <button data-type="get_free_spins_button">Get Free Spins Button</button>
          </div>
        </div>
        <button class="btn" id="addWin">Insert Win</button>
        <button class="btn" id="addLabel">Insert Label</button>
      </div>
    </div>
    <div class="canvasWrap">
      <div id="canvas" class="canvas">
        <div class="grid-bg"></div>
      </div>
      <div class="panel">
        <textarea id="msgInput" class="textarea" placeholder="Type prompt..."></textarea>
        <div class="sendRow">
          <button class="btn primary" id="send">Send</button>
        </div>
      </div>
    </div>
    <div class="footer">Positions and sizes are scaled to 0..1024</div>
  </div>
  <div id="contextMenu" class="context">
    <div class="row"><label>x</label><input id="ctxX" type="number"/></div>
    <div class="row"><label>y</label><input id="ctxY" type="number"/></div>
    <div class="row"><label>width</label><input id="ctxW" type="number"/></div>
    <div class="row"><label>height</label><input id="ctxH" type="number"/></div>
    <div class="row" id="textRow"><label>text</label><input id="ctxText"/></div>
    <div class="actions">
      <button id="btnDelete">Delete</button>
      <button id="btnApply">Apply</button>
    </div>
  </div>
  <script>
    /* script stays unchanged from your single-line version */
  </script>
</body>
</html>
